<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width,initial-scale=1" />

      <meta http-equiv="Pragma" content="no-cache">
      <meta http-equiv="Cache-Control" content="no-cache">
      <meta http-equiv="Expires" content="0">

      <meta name="robots" content="noindex">

      <title>Kikkoman</title>
      <meta name="description" content="Kikkoman">

      <link href="https://genkasaneiwa.github.io/kikkoman/assets/css/ar.css?v=1.1" rel="stylesheet">
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@100;200;300;400;500;600;700&display=swap"
         rel="stylesheet">
      <!-- materialアイコン-->
      <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" />

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <!-- ar.js用ファイル-->
      <script
         src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js">
      </script>
      <!-- 画像トラック用 マーカー時に入れているとおかしくなる-->
      <!-- <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script> -->
      <!-- マーカートラック用-->
      <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
      <!-- クリック用-->
      <script src="https://rawgit.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-click-events/events.js">
      </script>
      <!-- particle用-->
      <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
      <!-- gltfアニメーション用 -->
      <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.2.0/dist/aframe-extras.min.js"></script>
      <script>
         AFRAME.registerComponent("registerevents", {
            init: function() {
               var marker = this.el;
               var loader = document.getElementById("loader");
               // var ar_show = document.getElementById("ar-show");
               // var audio = document.getElementById("audio");
               // var flag = document.querySelector('.vol-on');

               // マーカーを検出したイベントの登録
               marker.addEventListener("markerFound", function() {
                  var markerId = marker.id;
                  //animation start方法 https://qiita.com/1pp0/items/059d5e5936ca5196f7e4
                  loader.style.display = "none";
                  // ar_show.style.display = "block";

                  // if (flag.classList.contains('js-on')) {
                  //    audio.play(); // onのときのみ音声再生
                  // }

               });

               // マーカーを見失ったイベントの登録
               marker.addEventListener("markerLost", function() {
                  var markerId = marker.id;
                  loader.style.display = "flex";
                  // ar_show.style.display = "none";
                  // audio.pause(); // 音声停止
               });
            },
         });
      </script>
   </head>

   <body>
      <div id="loader" class="loader">
         <div class="loader__wrapper">
            <p class="loader__para">please hold your phone up to the marker
            </p>
            <img class="loader__img" src="https://genkasaneiwa.github.io/kikkoman/assets/img/marker/marker.png" alt="marker">
            <!-- <p class="loader__para">*music will start as soon as the marker matches</p> -->
         </div>
      </div>

      <a-scene vr-mode-ui="enabled: false;" renderer="logarithmicDepthBuffer: true;" embedded
         arjs="trackingMethod: best; sourceType: webcam;debugUIEnabled: false;">

         <a-assets>
            <a-asset-item id="soysauce" src="https://genkasaneiwa.github.io/kikkoman/assets/img/model/soysauce/kikkoman.gltf"></a-asset-item>
         </a-assets>
         <!-- ライトをいれるとデフォルトからこの設定に書き換わる -->
         <a-light type="ambient" color="#fff"></a-light>

         <!--マーカー用 https://jeromeetienne.github.io/AR.js/three.js/examples/marker-training/examples/generator.html-->
         <a-marker type="pattern" url="https://genkasaneiwa.github.io/kikkoman/assets/img/marker/marker.patt" registerevents>
            
            <!-- <a-image id="target" src="" 
               height="2" 
               width="3"
               scale="1 1 1"
               position="1 1 1"
               rotation="270 0 0">
            </a-image> -->

            <a-entity   
               position="0 0 0"
               rotation="0 0 0"
               fbx-model="#soysauce"
               scale="100 100 100"
               animation-mixer
            ></a-entity>

            <!-- animation="property: rotation; to: 0 10000 0; loop: true; dur: 500000;" -->
         
            
            <!-- 
            x +にすると右による
            y -にすると近づく 
            z -にすると上に上がる
            -->
            
            <!-- <a-image
               src="https://genkasaneiwa.github.io/ar-js//fluff_festival/assets/img/marker.jpg"
               width="300"
               height="300"
               scale="1 1 1"
               position="145 -10 -200"
               rotation="270 0 0"
               >
            </a-image> -->

            <!-- <a-text id="text" position="145 -10 -200" rotation="270 0 0" value="" color="white" width="700" align="center"></a-text> -->

      </a-marker>
         
         <a-entity camera></a-entity>
      </a-scene>


      <script>
        
      </script>
   </body>
</html>